# مواصفات أداة التخطيط التضامني - Planning Workspace

## نظرة عامة
هذا المستند يحتوي على المواصفات الكاملة لبناء أداة تخطيط تفاعلية داخل تطبيق سـوبــرا تحاكي منصات الوايت بورد مثل ميرو (Miro).

---

## أولاً: الرؤية العامة للمشروع

### الهدف الرئيسي
بناء **أداة تخطيط تفاعلية** داخل التطبيق تحاكي منصات الوايت بورد (مثل ميرو) وتتكامل مع بيئة سـوبــرا بشكل كامل.

### معايير الجودة
- يجب أن تكون النتيجة النهائية مستقرة وسهلة الاستخدام
- تستوفي جميع الخصائص المذكورة في المواصفات
- مراعاة الأداء والجودة على مستوى شركات كبرى مثل Google وMicrosoft

### المساحة المخصصة في التطبيق
```tsx
const PlanningWorkspace: React.FC<PlanningWorkspaceProps> = ({
  isSidebarCollapsed
}) => {
  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);
  const [isPlanningSidebarCollapsed, setIsPlanningSidebarCollapsed] = useState(false);
  
  return (
    <div className={`fixed top-[var(--sidebar-top-offset)] h-[calc(100vh-var(--sidebar-top-offset))] transition-all duration-300 ${
      isSidebarCollapsed 
        ? 'right-[calc(var(--sidebar-width-collapsed)+18px)] w-[calc(100vw-var(--sidebar-width-collapsed)-26px)]'
        : 'right-[calc(var(--sidebar-width-expanded)+18px)] w-[calc(100vw-var(--sidebar-width-expanded)-26px)]'
    }`}>
      <PlanningPanel 
        selectedCategory={selectedCategory} 
        isMainSidebarCollapsed={isSidebarCollapsed} 
        isPlanningSidebarCollapsed={isPlanningSidebarCollapsed} 
      />
    </div>
  );
};
```

---

## ثانياً: المواصفات التفصيلية

### 1. واجهة الدخول

#### العناصر الرئيسية:

**أ. خيارات البدء:**
- **جديد**: بدء لوحة كانفس جديدة فارغة
- **قالب**: بدء لوحة كانفس بقالب معد مسبقاً
- **ملف**: رفع ملف (نص/صورة/PDF) يقوم النظام بتحليل محتواه وإنشاء لوحة كانفس تشتمل المكونات الأنسب

**ب. شبكة اللوحات المحفوظة:**
- عرض لوحات الكانفس المحفوظة مرتبة حسب الأحدث
- تصميم مبسط وحديث يعرض:
  - اسم اللوحة
  - حالة المشروع
  - آخر تعديل
- وظائف: حذف، نسخ، إعادة تسمية، ترتيب

---

### 2. واجهة لوحة التخطيط

#### أ. لوحة الكانفس (منطقة الرسم والتحرير)

**الخصائص:**
- **التكبير/التصغير (Zoom)**: دعم كامل لتكبير وتصغير العرض
- **التنقل الحر (Pan)**: التحرك في كافة الاتجاهات
- **التوسع اللانهائي**: قابلة للاتساع والتقلص تلقائياً مع إضافة/حذف المكونات

---

#### ب. شريط الأدوات (Bottom Toolbar)

**الموقع:** أسفل منتصف الواجهة، ثابت دائماً

**الوظيفة:** يعرض مجموعة أزرار، كل زر يمثل أداة لها وظيفة محددة وكل أداة مرتبطة بلوحة تخصيص خاصة

##### 1. أداة التحديد والتحرير (Selection Tool)
```yaml
tool_id: selection_tool
icon: arrow
cursor: arrow
shortcut: V
panel: selection_panel
```

**وظائف الأداة:**
- تحديد مكون واحد عبر النقر
- تحرير مكون واحد أو مكونات مجمعة عبر النقر المزدوج
- تحديد أكثر من مكون عبر النقر المطول + السحب
- نقل أو تعديل حجم أو تدوير المكون/المكونات المحددة (عبر bounding box)
- نسخ، حذف، تجميع، محاذاة، أو قفل المكونات

**استخدام الأداة مع الكيبورد:**
- `Shift + Click`: تحديد عناصر متعددة
- `Cmd/Ctrl + A`: تحديد الكل
- `الأسهم`: تحريك دقيق بـ 1px
- `Shift + أسهم`: تحريك سريع بـ 10px
- `Cmd + سحب`: تكرار العنصر
- `Shift + سحب`: تحريك على نفس المستوى
- `Ctrl + G / Shift + G`: تجميع / فك التجميع
- `Esc`: إلغاء تحديد

##### 2. أداة القلم الذكي (Smart Pen)
```yaml
tool_id: smart_pen
icon: pen
cursor: pen
shortcut: P
panel: smart_pen_panel
```

**وظائف الأداة:**
- رسم حر داخل الكانفاس
- عند تفعيل الرسم الذكي، يتعرف النظام على الرسم ويحوله إلى:
  - **رسم ذكي**: تحويل الشكل المرسوم يدوياً إلى أقرب شكل هندسي
  - **جذر ذكي**: رسم خط يربط عنصرين يتحول إلى رابط ذكي
  - **تجميع في إطار**: رسم حلقة حول مجموعة عناصر يجمعها في إطار
  - **مسح**: خربشة على عنصر تؤدي إلى حذفه

**استخدام الأداة مع الكيبورد:**
- `Shift`: رسم خط مستقيم
- `Alt`: التحويل للوضع الذكي
- `Esc`: إلغاء أداة القلم

##### 3. أداة الإطار (Frame Tool)
```yaml
tool_id: frame_tool
icon: square
cursor: crosshair
shortcut: F
panel: null
```

**وظائف الأداة:**
- تجميع المكونات والتعامل معها كمكون واحد
- النقر المطول + السحب لتحديد موقع وحجم وأبعاد الإطار

**استخدام الأداة مع الكيبورد:**
- `F`: تفعيل الأداة
- `Shift + سحب`: إدراج بنسبة متساوية (1:1)
- `Alt + سحب`: الإدراج من المركز
- `Esc`: الخروج من الأداة

##### 4. أداة رفع الملفات (File Uploader)
```yaml
tool_id: file_uploader
icon: upload_clip
cursor: arrow
shortcut: U
panel: file_upload_panel
```

**وظائف الأداة:**
- رفع الملفات من الجهاز إلى الكانفس
- خاصة بالمضيف (Host) مع إمكانية منح صلاحية للآخرين
- طرق الإدراج:
  - سحب مباشر إلى الكانفاس (عنصر مستقل)
  - سحب إلى مكون وربطه به
  - زر "إدراج" للإدراج التلقائي
  - زر "إدراج ذكي" للتحليل بالذكاء الصناعي

**استخدام الأداة مع الكيبورد:**
- `U`: فتح نافذة الرفع
- `Enter`: إدراج الملف المحدد
- `Shift + Enter`: إدراج ذكي

##### 5. أداة النص (Text Tool)
```yaml
tool_id: text_tool
icon: T
cursor: text_cursor
shortcut: T
panel: text_panel
```

**وظائف الأداة:**
- إدراج نص كسطر حر
- إدراج نص كمربع نص
- إدراج نص داخل/على حد أي شكل هندسي/عنصر ذكي

**استخدام الأداة مع الكيبورد:**
- `T`: تفعيل أداة النص
- `Enter`: إدراج النص
- `Esc`: إلغاء الإدخال
- `Ctrl/Cmd + B`: عريض
- `Ctrl/Cmd + I`: مائل
- `Ctrl/Cmd + U`: تحته خط
- `Ctrl/Cmd + A`: تحديد النص
- `السهم`: تحريك مؤشر النص
- `Shift + السهم`: تحريك النص

##### 6. أداة الشكل (Shapes Tool)
```yaml
tool_id: shapes_tool
icon: Star
cursor: crosshair
shortcut: R
panel: shapes_panel
```

**وظائف الأداة:**
- إدراج الشكل المحدد من مكتبة الأشكال
- النقر المطول + السحب لتحديد موقع وحجم وأبعاد الشكل

**استخدام الأداة مع الكيبورد:**
- `R`: تفعيل الأداة
- `Enter`: إدراج الشكل بأبعاد قياسية
- `Shift + سحب`: إدراج بنسبة متساوية (1:1)
- `Alt + سحب`: الإدراج من المركز
- `Esc`: الخروج من الأداة

##### 7. أداة العنصر الذكي (Smart Element Tool)
```yaml
tool_id: smart_element_tool
icon: Lamp
cursor: crosshair
shortcut: S
panel: smart_elements_panel
```

**وظائف الأداة:**
- إدراج العنصر الذكي المحدد (ثينك بورد، جانت، كنابان...)
- النقر المطول + السحب لتحديد موقع وحجم وأبعاد العنصر
- العنصر عبارة عن إطار يحتوي على عدة عناصر خاصة

**استخدام الأداة مع الكيبورد:**
- `S`: تفعيل الأداة
- `Enter`: إدراج العنصر بأبعاد قياسية
- `Shift + سحب`: إدراج بنسبة متساوية (1:1)
- `Alt + سحب`: الإدراج من المركز
- `Esc`: الخروج من الأداة

---

#### ج. زر الذكاء الصناعي (AI Button)

**الموقع:** بجانب شريط الأدوات، ثابت دائماً

**الوظيفة:** التحكم بوظائف الذكاء الصناعي

**المكونات:**
عند النقر، يظهر بالون يحتوي على:

1. **صندوق محادثة**: للتحدث مباشرة مع نموذج الذكاء الصناعي

2. **أزرار التنفيذ الذكية:**
   - **مشروع ذكي**: تحليل محتويات الكانفس وتحويلها إلى "بطاقة مشروع" تُضاف لقائمة المشاريع
   - **المراجعة والفحص**: فحص وتحليل مكونات الكانفاس واقتراح إضافات/تعديلات
   - **التنظيف**: رصد المكونات غير المهمة وجمعها في طبقة مستقلة غير مرئية

---

#### د. شريط التحكم العلوي (Top Control Bar)

**الموقع:** أعلى منتصف الواجهة، ثابت دائماً

**الوظيفة:** خيارات التحكم العامة

**المكونات:**
1. **التراجع/التقدم**: عن تنفيذ العمليات
2. **سجل العمليات**: عرض تاريخ الإجراءات
3. **المشاركة**: بالون يحتوي على ثلاث تبويبات:
   - المشاركين
   - التعليق النصي
   - المحادثة الصوتية
4. **الطبقات**: بالون يحتوي على:
   - قائمة الطبقات (طبقة لكل مكون - الوضع الافتراضي)
   - إمكانية تجميع الطبقات في ملف
   - أيقونات للهوست فقط:
     - عين: إظهار/إخفاء المكون
     - قفل: منع تعديل أو تحرير المكون
     - سلة المهملات: حذف المكون
5. **خصائص الكانفس**: بالون يحتوي على:
   - إظهار/إخفاء الشبكة
   - تفعيل/تعطيل المحاذاة التلقائية
   - شكل الشبكة: نقاط/مربعات/خلية نحل
6. **ملف**: بالون يحتوي على:
   - جديد
   - حفظ
   - تصدير
   - فتح
7. **اسم اللوحة**: قابل للتعديل

---

#### هـ. شريط الملاحة السفلي (Bottom Navigation Bar)

**الموقع:** أسفل يمين الواجهة، ثابت دائماً

**الوظيفة:** أدوات التحكم بالملاحة والعرض والوصول

**المكونات:**
1. **زر التكبير (Zoom In)**
2. **سلايدر الزوم**: للتكبير والتصغير
3. **زر التصغير (Zoom Out)**
4. **قائمة الزوم الرقمية**: قيم من 10% إلى 500%
5. **زر الملاءمة**: ضبط الزوم بشكل ملائم للواجهة
6. **زر الكف**: تفعيل التنقل عبر النقر المطول والسحب
7. **زر الخريطة المصغرة**: بالون يحتوي على خريطة مصغرة للكانفس كامل
8. **زر التوسيع**: توسيع الكانفس ليحتل كامل الواجهة

---

#### و. شريط تحرير المكونات الطافي (Floating Editing Toolbar)

**الموقع:** يظهر فوق أي مكون يتم تحديده

**الوظيفة:** أدوات التحكم بخصائص المكونات

**المكونات:**
- أدوات مخصصة لتعديل خصائص المكونات (ألوان، خطوط، أحجام، محاذاة...)
- تتغير الأدوات بتغير المكون المحدد
- زر الذكاء الصناعي: لتنفيذ عمليات خاصة بالمكون المحدد

---

#### ز. لوحة تخصيص الأدوات والمكونات (Tool Customization Panel)

**الموقع:** يسار الواجهة

**الوظيفة:** مساحة تفاعلية تتغير حسب الأداة المحددة

**اللوحات المختلفة:**

##### 1. selection_panel (لوحة التحديد والتحرير)

**المكونات:**
- **الإجراءات الأساسية**: قص، نسخ، لصق، حذف
- **التجميع**: تجميع/إلغاء التجميع
- **القفل والحماية**: قفل/إلغاء قفل
- **التحويل**: عكس أفقي/عمودي
- **المحاذاة**: محاذاة للجوانب/الوسط

##### 2. smart_pen_panel (لوحة القلم الذكي)

**المكونات:**
- **تبويب التصميم**:
  - زر تفعيل الرسم الذكي
  - سمك الخط: سلايدر
  - لون القلم: اختيار من مجموعة ألوان
  - نمط الخط: متصل، متقطع، نقطي، مزدوج

##### 3. file_upload_panel (لوحة رفع المرفقات)

**المكونات:**
- **منطقة السحب والإفلات**: لتحميل مباشر
- **زر "اختر ملف"**: للرفع اليدوي
- **عرض مصغر**: معاينة للملفات المرفوعة
- **قائمة الملفات**: جميع الملفات المرفوعة مسبقاً
- **أزرار لكل ملف**:
  - حذف
  - إدراج
  - إدراج ذكي

##### 4. text_panel (لوحة النص)

**المكونات:**
- **نوع النص**: سطر نص / مربع نص / نص إلى مكون
- **نوع الخط**: قائمة منسدلة (مكتبة خطوط Google)
- **وزن الخط**: دقيق، عادي، عريض
- **الحجم**: سلايدر أو إدخال رقمي
- **المحاذاة**: يمين - وسط - يسار
- **لون النص**: اختيار من لوح الألوان
- **تنسيقات**: عريض، مائل، تحته خط

##### 5. shapes_panel (لوحة الأشكال)

**المكونات:**
- **التبويبات**:
  - الأشكال الأساسية
  - الأشكال الفنية
  - الأيقونات
  - ستيكي نوت
- **داخل كل تبويب**:
  - شبكة من الأشكال القابلة للاختيار
  - تخصيص الشكل:
    - لون الشكل
    - سمك ولون الحواف
    - الشفافية

##### 6. smart_elements_panel (لوحة العناصر الذكية)

**تنقسم إلى قسمين:**

**أ. قائمة العناصر:**
- عرض شبكي للعناصر الذكية
- كل عنصر يظهر مع اسمه وأيقونته
- بالضغط عليه يتم تحديد العنصر

**ب. إعدادات العنصر:**
- منطقة مخصصة لعرض الإعدادات الخاصة بكل عنصر
- تتغير الإعدادات بحسب العنصر المحدد

---

## ثالثاً: العناصر الذكية (Smart Elements)

### أ. عناصر التعاون

#### 1. لوحة التفكير (ThinkingBoard)

**الغرض:** تجميع الأفكار والمكونات المتعلقة بمفهوم محدد ضمن لوحة واحدة

**طريقة العمل:**
- لوحة داخل الكانفاس تحتوي على اسم المفهوم الرئيسي
- سحب مكونات الكانفاس إلى داخلها للتجميع
- تدعم تعليقات، تلوين الخلفية، ووضع علامات توضيحية

**الخصائص:**
- تسمية اللوحة
- تغيير لون الخلفية
- إضافة وسوم معرفية
- ترتيب داخلي حر للعناصر

**الوضعيات:**
- ثابتة (قابلة للقفل)
- قابلة للتمدد بالحجم
- حدود تظهر عند المرور فقط

#### 2. لوحة كانبان (KanbanBoard)

**الغرض:** تنظيم المهام أو الأفكار ضمن أعمدة حسب الحالة أو التصنيف

**طريقة العمل:**
- لوحة بثلاث أعمدة افتراضية (To Do, In Progress, Done)
- تعديل أسماء الأعمدة أو إضافة أعمدة جديدة
- سحب وإفلات العناصر بين الأعمدة

**الخصائص:**
- تخصيص عدد وأسماء الأعمدة
- تخصيص ألوان الأعمدة
- سحب حر للبطاقات
- حساب تلقائي للعدد داخل كل عمود
- دعم تعليقات وتصويت على كل بطاقة

**الوضعيات:**
- عرض مضغوط أو ممتد
- تحديد عمود افتراضي عند الإنشاء
- قفل النقل مؤقتاً (للهوست)

#### 3. التصويت (Voting)

**الغرض:** جمع الآراء أو اتخاذ القرار الجماعي

**طريقة العمل:**
- إطار جديد مخصص للتصويت
- المضيف يدخل الخيارات وعدد الأصوات المسموح بها
- المستخدمون يصوتون مباشرة
- تحديث النتائج في الوقت الحقيقي

**الخصائص:**
- تحديد عدد الخيارات
- تحديد المدة الزمنية
- تحديد عدد الأصوات لكل مشارك
- عرض النتائج نسبياً أو عددياً
- تصويت متعدد أو حصري

#### 4. محرك العصف الذهني (Brainstorming)

**الغرض:** تجميع الأفكار بسرعة من عدة مشاركين

**طريقة العمل:**
- لوحة دردشة مخصصة لإدخال الأفكار
- تنظيم الأفكار ضمن مجموعات
- الذكاء الصناعي ينتج عناصر ذكية بعد تحليل الأفكار المحددة

**أنماط العصف الذهني:**
- **تعاوني**: كل شيء مرئي لجميع المشاركين
- **صامت**: إخفاء المساهمات حتى انتهاء الجلسة
- **سريع**: رد من كلمة واحدة لكل جولة
- **تشعبي**: ربط جميع الردود بفكرة محددة

**الإعدادات:**
- تحديد نمط العصف
- تحديد عدد المشاركين
- ضبط المدة الزمنية

---

### ب. عناصر التخطيط

#### 1. خط زمني (Timeline)

**الغرض:** تنظيم العناصر على محور زمني

**طريقة العمل:**
- تحديد نقطة البداية والنهاية الزمنية
- شريط أفقي مقسم حسب وحدة الوقت (أيام، أسابيع، شهور)
- سحب أي عنصر وربطه بنقطة زمنية

**الخصائص:**
- مرونة في تحديد وحدة الزمن
- دعم السحب والإفلات لأي نوع من العناصر
- طبقات منفصلة لمنع التداخل
- تغيير تاريخ العنصر بسهولة
- تمييز بصري حسب نوع العنصر

#### 2. مصفوفة القرارات/الأهداف (Decisions/ObjectivesMatrix)

**الغرض:** تقييم مجموعة من الخيارات أو الأهداف بناءً على معايير محددة

**طريقة العمل:**
- مصفوفة من صفوف (الخيارات) وأعمدة (المعايير)
- إدخال القيم يدوياً أو عن طريق الذكاء الصناعي
- ترجيح المعايير وإعادة ترتيبها
- توليد نتيجة تلقائية للترتيب

**الخصائص:**
- إضافة/حذف صفوف وأعمدة
- دعم التقييم الرقمي أو الرمزي
- تلوين تلقائي حسب القيمة
- تحليل آلي للترجيح والتوصيات
- دعم المصفوفات التكرارية

---

### ج. عناصر التحليل

#### 1. مخطط جانت (Gantt)

**الغرض:** عرض وتسلسل المهام عبر مستويات زمنية متعددة

**طريقة العمل:**
- تحديد المهام وتواريخها (بداية ونهاية)
- عرض المهام كأشرطة أفقية على مخطط زمني
- سحب المهمة لتغيير توقيتها أو مدتها
- ربط المهام بعلاقات شرطية

**الخصائص:**
- دعم مستويات زمنية (يومي، أسبوعي، شهري)
- سحب وإفلات لإعادة جدولة المهام
- دعم العلاقات بين المهام (سابق، لاحق، متوازي)
- تحليل تداخل المهام
- دعم الألوان حسب نوع المهمة

#### 2. ورقة البيانات التفاعلية (InteractiveSheet)

**الغرض:** إدارة بيانات مركبة (جداول، خطط زمنية، موازنات) داخل الكانفاس

**طريقة العمل:**
- ورقة عمل قابلة للتحرير (شبكة من الصفوف والأعمدة)
- إدخال نصوص، أرقام، صيغ حسابية، تواريخ
- ربط أي عنصر من الكانفاس بخلايا معينة
- التحديث التلقائي من مصادر أخرى

**الخصائص:**
- دعم كامل للصيغ الرياضية والمنطقية (SUM, IF, AVG)
- تنسيقات مخصصة للخلايا
- دمج خلايا، إضافة تعليقات، قفل أعمدة/صفوف
- تحليل بالذكاء الصناعي

#### 3. خرائط ذهنية ذكية (SmartMindMaps)

**الغرض:** تنظيم وربط الأفكار بصرياً انطلاقاً من فكرة محورية

**طريقة العمل:**
- إنشاء العقدة المركزية مباشرة
- إضافة أفكار فرعية من كل جانب
- نقل الأفكار وإعادة هيكلتها بالسحب
- تحليل العلاقات وإعادة ترتيب الخريطة تلقائياً

**الخصائص:**
- دعم إدخال يدوي أو توليد تلقائي بالذكاء الصناعي
- تخصيص ألوان الفروع
- دعم مستويات لا محدودة من التفرع
- تكامل مع العناصر الذكية

---

### د. البطاقات الذكية

#### 1. بطاقات المشاريع (ProjectCards)
**الغرض:** عرض المشاريع والمهام بشكل بطاقات تفاعلية
**يرث من:** `src/components/ProjectManagement/cards/TaskList` و `src/components/ProjectCard/index.tsx`

#### 2. بطاقات الوضع المالي (FinanceCards)
**الغرض:** تحليل مالي تفاعلي ومباشر للميزانيات والنتائج
**يرث من:** `src/components/DepartmentTabs/Financial/AnalysisTab.tsx`

#### 3. بطاقات المسؤولية الاجتماعية (CsrCards)
**الغرض:** لوحة تحكم مختصرة لعرض وتتبع أداء مبادرات المسؤولية الاجتماعية
**يرث من:** `src/components/DepartmentTabs/CSR/CSRDashboard.tsx`

#### 4. بطاقات علاقات العملاء (CrmCards)
**الغرض:** عرض وتحليل بيانات تفاعل العملاء مع العلامة
**يرث من:** `src/components/DepartmentTabs/CRM/AnalyticsTab.tsx`

**وظائف جميع البطاقات:**
- إمكانية إضافة البطاقات إلى أي عنصر ذكي آخر
- تخصيص البيانات المعروضة
- رسوم بيانية وتقارير ديناميكية
- متابعة لحظية للبيانات في الوقت الفعلي
- تحليل ذكي بالذكاء الاصطناعي
- تنبيهات عند وجود مؤشرات حرجة
- اقتراحات للمعالجة

---

### هـ. عناصر الربط الذكية

#### الجذر (RootConnector)

**الغرض:** ربط أي مكون/إطار مكونات بآخر بعلاقة بصرية ووظيفية

**طريقة العمل:**
- عند تحديد مكون أو إطار، تظهر نقاط حوله
- سحب إحدى النقاط والتوصيل بمكون/إطار آخر
- تظهر نافذة عائمة مرتبطة بالخط المرسوم تحتوي على:
  - **إضافة عنوان**: تعريف نصي للرابط
  - **نص**: تعليق مطول للرابط
  - **تحليل AI**: تحليل الروابط والعلاقات واقتراح مكونات جديدة
  - **زر "التحويل"**: إدراج العناصر المقترحة محل المكونات السابقة

**الحالات المدعومة:**
- جزء من مكون ↔ جزء من مكون
- جزء من مكون ↔ مكون
- جزء من مكون ↔ إطار
- مكون ↔ مكون
- مكون ↔ إطار
- إطار ↔ إطار

---

## رابعاً: الخطة العامة للتطوير

### المرحلة الأولى: البنية الأساسية ✅ جاهز للتنفيذ

**المهام:**
1. إعداد المكونات الأساسية:
   - إنشاء `PlanningWorkspace` كبنية عامة
   - إنشاء `InfiniteCanvas` مع دعم Zoom/Pan
   - تهيئة نظام إدارة الحالة (State Management)

2. هيكلة البيانات:
   - تصميم Types/Interfaces للعناصر
   - تحديد مخطط التخزين المحلي

3. إعداد نظام الأحداث:
   - بناء طبقة للتعامل مع أحداث الفأرة والكيبورد
   - وضع واجهات داخلية قابلة للتوسعة

**الملفات المطلوبة:**
- `src/components/planning/PlanningWorkspace.tsx`
- `src/components/planning/InfiniteCanvas.tsx`
- `src/components/planning/state/ToolingContext.tsx`
- `src/types/planning.ts`
- `src/hooks/usePlanningCanvas.ts`

---

### المرحلة الثانية: واجهة الدخول ⏳ في الانتظار

**المهام:**
1. تصميم واجهة الخيارات (جديد/قالب/ملف)
2. بناء شبكة المشاريع/اللوحات المحفوظة
3. تنفيذ وظائف الحذف، النسخ، إعادة التسمية

**الملفات المطلوبة:**
- `src/components/planning/EntryInterface.tsx`
- `src/components/planning/BoardsGrid.tsx`
- `src/components/planning/NewBoardDialog.tsx`

---

### المرحلة الثالثة: أداة الكانفاس ⏳ في الانتظار

**المهام:**
1. تنفيذ خاصية التكبير/التصغير
2. تنفيذ خاصية التحريك (Pan)
3. دعم إضافة/حذف المكونات والتوسع التلقائي
4. إدارة الطبقات

**الملفات المطلوبة:**
- `src/components/planning/canvas/CanvasLayer.tsx`
- `src/components/planning/canvas/LayersManager.tsx`
- `src/hooks/useCanvasZoom.ts`
- `src/hooks/useCanvasPan.ts`

---

### المرحلة الرابعة: شريط الأدوات وأساسيات الأدوات ⏳ في الانتظار

**المهام:**
1. أداة التحديد والتحرير
2. أداة القلم الذكي
3. أداة الإطار
4. أداة رفع الملفات
5. أداة النص
6. أداة الشكل
7. أداة العناصر الذكية

**الملفات المطلوبة:**
- `src/components/planning/toolbar/BottomToolbar.tsx`
- `src/components/planning/tools/SelectionTool.tsx`
- `src/components/planning/tools/SmartPenTool.tsx`
- `src/components/planning/tools/FrameTool.tsx`
- `src/components/planning/tools/FileUploaderTool.tsx`
- `src/components/planning/tools/TextTool.tsx`
- `src/components/planning/tools/ShapesTool.tsx`
- `src/components/planning/tools/SmartElementTool.tsx`
- `src/components/planning/panels/[tool]_panel.tsx` (لكل أداة)

---

### المرحلة الخامسة: عناصر الذكاء الصناعي ⏳ في الانتظار

**المهام:**
1. بناء زر الذكاء الصناعي
2. صندوق المحادثة مع AI
3. أزرار التنفيذ الذكية (مشروع ذكي، المراجعة، التنظيف)
4. دمج المقترحات الذكية

**الملفات المطلوبة:**
- `src/components/planning/ai/AIAssistant.tsx`
- `src/components/planning/ai/AIChatbox.tsx`
- `src/components/planning/ai/SmartActions.tsx`

---

### المرحلة السادسة: الشريط العلوي والسفلي ⏳ في الانتظار

**المهام:**
1. شريط التحكم العلوي (Undo/Redo، History، Share، Layers، Canvas Properties، File، Board Name)
2. شريط الملاحة السفلي (Zoom controls، Pan، Minimap، Expand)
3. شريط التحرير الطافي

**الملفات المطلوبة:**
- `src/components/planning/toolbar/TopControlBar.tsx`
- `src/components/planning/toolbar/BottomNavigationBar.tsx`
- `src/components/planning/toolbar/FloatingEditBar.tsx`

---

### المرحلة السابعة: لوحة تخصيص الأدوات ⏳ في الانتظار

**المهام:**
1. بناء لوحة جانبية ديناميكية
2. تنفيذ جميع لوحات التخصيص
3. دعم الظهور والاختفاء التلقائي

**الملفات المطلوبة:**
- `src/components/planning/customization/CustomizationPanel.tsx`
- `src/components/planning/customization/panels/*.tsx`

---

### المرحلة الثامنة: العناصر الذكية المتقدمة ⏳ في الانتظار

**المهام:**
1. تطوير عناصر التعاون (ThinkingBoard، KanbanBoard، Voting، Brainstorming)
2. تطوير عناصر التخطيط (Timeline، Decisions/ObjectivesMatrix)
3. تطوير عناصر التحليل (Gantt، InteractiveSheet، SmartMindMaps)
4. تطوير البطاقات الذكية
5. تطوير RootConnector

**الملفات المطلوبة:**
- `src/components/planning/smart-elements/collaboration/*.tsx`
- `src/components/planning/smart-elements/planning/*.tsx`
- `src/components/planning/smart-elements/analysis/*.tsx`
- `src/components/planning/smart-elements/cards/*.tsx`
- `src/components/planning/smart-elements/connectors/RootConnector.tsx`

---

### المرحلة التاسعة: التكامل والاختبارات ⏳ في الانتظار

**المهام:**
1. دمج جميع المكونات
2. كتابة اختبارات وحدية ووظيفية
3. اختبارات أداء
4. مراجعة تجربة المستخدم (UI/UX)

---

### المرحلة العاشرة: الصيانة والتحسين ⏳ في الانتظار

**المهام:**
1. جمع ملاحظات المستخدمين
2. إجراء تحسينات مستمرة
3. إضافة خصائص جديدة
4. تحديث المكتبات والأدوات

---

## ملاحظات مهمة

### التقنيات المستخدمة
- **React 18** مع TypeScript
- **Tailwind CSS** للتصميم (استخدام نظام الرموز من `index.css`)
- **Zustand** أو **React Context** لإدارة الحالة
- **Framer Motion** للحركات والانتقالات
- **Fabric.js** أو **Konva.js** لمحرك الكانفاس (اختياري)

### معايير الكود
- استخدام HSL للألوان فقط
- الالتزام بنظام الرموز (Design Tokens) من التطبيق
- كتابة كود نظيف وقابل للصيانة
- توثيق الدوال والمكونات المعقدة
- التركيز على الأداء والتجربة السلسة

### الأولويات
1. الاستقرار والموثوقية
2. سهولة الاستخدام
3. الأداء السريع
4. قابلية التوسع
5. التكامل مع بقية التطبيق

---

## الحالة الحالية: جاهز لبدء المرحلة الأولى

**في انتظار الأمر لبدء تنفيذ المرحلة الأولى...**
