# CanvasBoard Component Documentation

## ุฑุงุฌุน ุงููุงุฏ ููุญุฉ ุงูุชุฎุทูุท ุงูุชุดุงุฑูู - ูุฑุงุฌุนุฉ ุดุงููุฉ

ุชู ุฅุฌุฑุงุก ูุฑุงุฌุนุฉ ุดุงููุฉ ูููุฏ ููุญุฉ ุงูุชุฎุทูุท ุงูุชุดุงุฑูู (`CanvasBoard`) ูุชุญุณูููุง ุจุดูู ูุงูู ูุถูุงู ุงูุฌูุฏุฉ ูุงูุชูุงูู ุงููุซุงูู.

## ๐ ุงููุฑุงุฌุนุฉ ูุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุชูุธูู ุงููููู ุงูุนุงู
- โ **ุชูุณูู ุงูููููุงุช**: ุชู ุชูุณูู ุงููููู ุงูุฑุฆูุณู ุฅูู ููููุงุช ุฃุตุบุฑ ููุฑูุฒุฉ
- โ **ูุตู ุงูููุทู**: ุชู ุงุณุชุฎุฑุงุฌ ุงูููุทู ุฅูู hooks ูุฎุตุตุฉ
- โ **ุชูุธูู ุงูุจูุงูุงุช**: ุชู ููู ุงูุจูุงูุงุช ุงูููููุฉ ุฅูู ูููุงุช ูููุตูุฉ

### 2. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ูุงูุฃุฏุงุก
- โ **ุชุญุณูู ุงูุฃุฏุงุก**: ุชู ุชุทุจูู `React.memo` ู `useCallback` ููุชุญุณูู
- โ **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ**: ุชู ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ูุน Zustand
- โ **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ุชู ุฅุถุงูุฉ ูุธุงู ุดุงูู ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูููุซูููุฉ
- โ **ุญุงุฌุฒ ุงูุฃุฎุทุงุก**: ุชู ุฅุถุงูุฉ `Error Boundary` ุดุงูู
- โ **ุงูุชุญูู ูู ุตุญุฉ ุงูุฅุฏุฎุงู**: ุชู ุชุทุจูู ูุธุงู ุชูุธูู ูุชุญูู ุดุงูู
- โ **ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช**: ุชู ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฌููุน ุงูููููุงุช

### 4. ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ
- โ **ุงูุฎุทูุท ุงูุนุฑุจูุฉ**: ุชู ุถูุงู ุงุณุชุฎุฏุงู `IBM Plex Sans Arabic`
- โ **ุงูุงุชุฌุงู ูู ุงููููู ูููุณุงุฑ**: ุชู ุชุทุจูู `textAlign: 'right'` ูููุตูุต
- โ **ุงููุญุชูู ุงูุนุฑุจู**: ุชู ุฏุนู ุงููุญุชูู ุงูุนุฑุจู ูู ุฌููุน ุงูุนูุงุตุฑ

## ๐ ูููู ุงููููุงุช ุงููุญุณูู

```
CanvasBoard/
โโโ CanvasBoard.tsx              # ุงููููู ุงูุฑุฆูุณู ุงููุญุณูู
โโโ components/                  # ุงูููููุงุช ุงููุฑุนูุฉ
โ   โโโ Canvas/                  # ููููุงุช ุงูููุญุฉ
โ   โโโ CanvasErrorBoundary.tsx  # ุญุงุฌุฒ ุงูุฃุฎุทุงุก
โ   โโโ ToolSelector.tsx         # ูุญุฏุฏ ุงูุฃุฏูุงุช
โ   โโโ PanelToggleControls.tsx  # ุฃุฒุฑุงุฑ ุงูุชุญูู ุจุงูุฃููุงุญ
โโโ data/                        # ุงูุจูุงูุงุช ูุงููุญุชูู
โ   โโโ mockData.ts             # ุงูุจูุงูุงุช ุงูููููุฉ ุงูููุธูุฉ
โโโ hooks/                       # ุงูู hooks ุงููุฎุตุตุฉ
โ   โโโ useCanvasBoardUI.ts     # ุฅุฏุงุฑุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู
โ   โโโ useSmartElements.ts     # ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ ุงูุฐููุฉ
โ   โโโ useCanvasElements.ts    # ุฅุฏุงุฑุฉ ุนูุงุตุฑ ุงูููุญุฉ (ูุญุณูู)
โโโ utils/                       # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โ   โโโ validation.ts           # ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
โ   โโโ performance.ts          # ุชุญุณููุงุช ุงูุฃุฏุงุก
โ   โโโ layerUtils.ts          # ุฃุฏูุงุช ุงูุทุจูุงุช
โ   โโโ testing.ts             # ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ
โโโ types.ts                    # ุชุนุฑููุงุช ุงูุฃููุงุน
```

## ๐๏ธ ุงูููููุงุช ุงููุญุณููุฉ

### 1. CanvasBoard.tsx (ุงููููู ุงูุฑุฆูุณู)
```typescript
// ุชู ุชุทุจูู ูุจุฏุฃ Single Responsibility
const CanvasBoard: React.FC = () => {
  return (
    <CanvasErrorBoundary>
      <CanvasBoardContent />
    </CanvasErrorBoundary>
  );
};
```

### 2. useCanvasBoardUI (ุฅุฏุงุฑุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู)
```typescript
export const useCanvasBoardUI = () => {
  const [showPanels, setShowPanels] = useState<PanelVisibility>({
    smartAssistant: true,
    layers: true,
    appearance: true,
    collaboration: true,
    tools: true
  });
  // ... ุงููุฒูุฏ ูู ุงูููุทู ุงูููุธู
};
```

### 3. ูุธุงู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
```typescript
export const validateCanvasElement = (element: any): element is CanvasElement => {
  // ุชุญูู ุดุงูู ูู ุตุญุฉ ุนูุงุตุฑ ุงูููุญุฉ
  if (!element || typeof element !== 'object') return false;
  // ... ุงููุฒูุฏ ูู ุนูููุงุช ุงูุชุญูู
};
```

## ๐จ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ุงููุญุณูู

### ุฎุตุงุฆุต ุงููุต ุงูุนุฑุจู
```typescript
const getDefaultStyle = (elementType: string) => {
  switch (elementType) {
    case 'text':
      return {
        fontSize: '16px',
        fontFamily: 'IBM Plex Sans Arabic',
        color: '#000000',
        textAlign: 'right' // ุฏุนู ุงููุชุงุจุฉ ูู ุงููููู ูููุณุงุฑ
      };
    // ...
  }
};
```

### ุงููุญุชูู ุงูุนุฑุจู ุงูุขูู
```typescript
export const sanitizeElementContent = (content: string): string => {
  // ุชูุธูู ุงููุญุชูู ูุน ุงูุญูุงุธ ุนูู ุงููุต ุงูุนุฑุจู
  return content
    .replace(/<script[^>]*>.*?<\/script>/gi, '')
    .replace(/javascript:/gi, '')
    .trim();
};
```

## ๐งช ูุธุงู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู

ุชู ุฅุถุงูุฉ ูุธุงู ุงุฎุชุจุงุฑ ุดุงูู ูุชุถูู:

### ุงุฎุชุจุงุฑุงุช ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- โ ูุญุต ุตุญุฉ ุนูุงุตุฑ ุงูููุญุฉ
- โ ูุญุต ุตุญุฉ ุงูุทุจูุงุช
- โ ูุญุต ุตุญุฉ ุงููุดุงุฑููู
- โ ูุญุต ุตุญุฉ ุฑุณุงุฆู ุงูุฏุฑุฏุดุฉ

### ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก
- โ ููุงุณ ุณุฑุนุฉ ุฅูุดุงุก ุงูุนูุงุตุฑ
- โ ููุงุณ ุณุฑุนุฉ ุชุญุฏูุซ ุงูุนูุงุตุฑ
- โ ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ

### ุงุฎุชุจุงุฑุงุช ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ
- โ ูุญุต ุฎุท IBM Plex Sans Arabic
- โ ูุญุต ุงูุงุชุฌุงู ูู ุงููููู ูููุณุงุฑ
- โ ูุญุต ุชูุธูู ุงููุญุชูู ุงูุนุฑุจู

## ๐ ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ

```typescript
import { runCompleteCanvasBoardTest } from './utils/testing';

// ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
const results = runCompleteCanvasBoardTest();

// ุงููุชูุฌุฉ ุชุญุชูู ุนูู:
// - ุงุฎุชุจุงุฑุงุช ุฃุณุงุณูุฉ (validation, layerTransform, mockData, arabicSupport)
// - ุงุฎุชุจุงุฑุงุช ูุฑุฆูุฉ (rtlSupport, arabicFonts)
// - ุงุฎุชุจุงุฑุงุช ุฃุฏุงุก (elementCreation, elementUpdate, memoryUsage)
```

## ๐ง ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุงูุฃุฏุงุก ูุงูุฐุงูุฑุฉ
- ุงุณุชุฎุฏุงู `React.memo` ููููููุงุช ุงููุชูุฑุฑุฉ
- ุชุทุจูู `useCallback` ู `useMemo` ููุฏูุงู ุงูููููุฉ
- ูุธุงู debouncing ููุนูููุงุช ุงููุชูุฑุฑุฉ

### 2. ุงูุฃูุงู ูุงูููุซูููุฉ
- ุชูุธูู ุงููุญุชูู ูู ุงูุฃููุงุฏ ุงูุถุงุฑุฉ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูู ุฌููุน ุงููุฑุงุญู
- ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก

### 3. ุณูููุฉ ุงูุตูุงูุฉ
- ููุฏ ููุธู ูููุณู ุจูุถูุญ
- ุชุนูููุงุช ูุชูุซูู ุดุงูู
- ูุตู ุงููุณุคูููุงุช ุจูุถูุญ

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุฅูุฌุงุฒ ูุฑุงุฌุนุฉ ุดุงููุฉ ูููุฏ ููุญุฉ ุงูุชุฎุทูุท ุงูุชุดุงุฑูู ูุน ุงูุชุฃูุฏ ูู:

- โ **ุฌูุฏุฉ ุงูููุฏ**: ููุฏ ููุธู ูุฎุงูู ูู ุงููุดุงูู
- โ **ุงูุชูุงูู ุงููุซุงูู**: ุฌููุน ุงูููููุงุช ุชุนูู ุจุชูุงุบู
- โ **ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ**: ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงููุชุงุจุฉ ูู ุงููููู ูููุณุงุฑ
- โ **ุงูุฃุฏุงุก ุงููุญุณูู**: ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ ูุฐุงูุฑุฉ ูุญุณููุฉ
- โ **ุงูููุซูููุฉ**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุงูุงุณุชุซูุงุกุงุช
- โ **ุงููุงุจููุฉ ููุตูุงูุฉ**: ููุฏ ุณูู ุงูููู ูุงูุชุทููุฑ

ุงูููุญุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู ุจููุงุกุฉ ุนุงููุฉ ูููุซูููุฉ ูุถูููุฉ.