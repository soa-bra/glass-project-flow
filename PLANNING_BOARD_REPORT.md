# ๐ ุชูุฑูุฑ ุดุงูู ูููุญุฉ ุงูุชุฎุทูุท ุงูุชุถุงููู

## ๐๏ธ ุงููููู ุงููุนูุงุฑู ุงูุนุงู

### ๐ ุงููููุงุช ุงูุฑุฆูุณูุฉ

#### 1. **ุงูุทุจูุฉ ุงูุฎุงุฑุฌูุฉ - ุญุงููุฉ ุงูููุญุฉ**
```
src/components/PlanningWorkspace.tsx
โโโ ุงุณุชูุฑุงุฏ: DirectionProvider (RTL Context)
โโโ ุงุณุชูุฑุงุฏ: IntegratedPlanningCanvasCard
โโโ ูุธููุฉ: ุชุญุฏูุฏ ููุถุน ุงูููุญุฉ ุจูุงุกู ุนูู ุญุงูุฉ ุงูุดุฑูุท ุงูุฌุงูุจู
```

#### 2. **ุทุจูุฉ ุงููุตุงุฏูุฉ ูุงูุชูุงูู**
```
src/pages/operations/solidarity/IntegratedPlanningCanvasCard.tsx
โโโ ุงุณุชูุฑุงุฏ: CollaborativeCanvas
โโโ ุงุณุชูุฑุงุฏ: AuthProvider
โโโ ูุธููุฉ: ุชุบููู ุงููุงููุงุณ ุจูุธุงู ุงููุตุงุฏูุฉ
```

#### 3. **ุงูููุงุฉ ุงูุฃุณุงุณูุฉ - ุงููุงููุงุณ ุงูุชุนุงููู**
```
src/apps/brain/canvas/CollaborativeCanvas.tsx
โโโ ุงุณุชูุฑุงุฏ: React Hooks (useState, useEffect, useCallback, useRef, useLayoutEffect)
โโโ ุงุณุชูุฑุงุฏ: Supabase Client
โโโ ุงุณุชูุฑุงุฏ: useAuth (ูุธุงู ุงููุตุงุฏูุฉ)
โโโ ุงุณุชูุฑุงุฏ: useTelemetry (ุงูููุงุณุงุช ูุงูุชุญููู)
โโโ ุงุณุชูุฑุงุฏ: YSupabaseProvider (ุงูุชุนุงูู ุงููุจุงุดุฑ)
โโโ ุงุณุชูุฑุงุฏ: useDebouncedCallback (ุชุญุณูู ุงูุฃุฏุงุก)
โโโ ุงุณุชูุฑุงุฏ: Y.js (ููุชุจุฉ ุงูุชุนุงูู)
โโโ ุงุณุชูุฑุงุฏ: WhiteboardTopbar (ุดุฑูุท ุงูุฃุฏูุงุช)
โโโ ุงุณุชูุฑุงุฏ: WhiteboardRoot (ุงููุงููุงุณ ุงูุฑุฆูุณู)
โโโ ุงุณุชูุฑุงุฏ: PropertiesPanel (ููุญุฉ ุงูุฎุตุงุฆุต)
โโโ ุงุณุชูุฑุงุฏ: StatusBar (ุดุฑูุท ุงูุญุงูุฉ)
โโโ ุงุณุชูุฑุงุฏ: SceneGraph (ุฅุฏุงุฑุฉ ุงูุนูุฏ)
โโโ ุงุณุชูุฑุงุฏ: ConnectionManager (ุฅุฏุงุฑุฉ ุงูุฑูุงุจุท)
โโโ ุงุณุชูุฑุงุฏ: useRootConnector (ููุตู ุงูุฌุฐุฑ)
โโโ ุงุณุชูุฑุงุฏ: useWF01Generator (ูููุฏ ุงููุดุงุฑูุน)
โโโ ุงุณุชูุฑุงุฏ: SmartElementsPanel (ููุญุฉ ุงูุนูุงุตุฑ ุงูุฐููุฉ)
โโโ ุงุณุชูุฑุงุฏ: smartElementsRegistry (ุณุฌู ุงูุนูุงุตุฑ ุงูุฐููุฉ)
โโโ ุงุณุชูุฑุงุฏ: FallbackCanvas (ุงููุงููุงุณ ุงูุงุญุชูุงุทู)
```

#### 4. **ุงููุงููุงุณ ุงูุฑุฆูุณู**
```
src/components/Whiteboard/WhiteboardRoot.tsx
โโโ ุงุณุชูุฑุงุฏ: SceneGraph
โโโ ุงุณุชูุฑุงุฏ: ConnectionManager
โโโ ุงุณุชูุฑุงุฏ: YSupabaseProvider
โโโ ุงุณุชูุฑุงุฏ: RootConnector
โโโ ุงุณุชูุฑุงุฏ: EnhancedSmartElementRenderer
โโโ ูุธููุฉ: ูุนุงูุฌุฉ ุงูุชูุงุนู ูุน ุงููุงููุงุณ (ุงููุงูุณุ ุงูููุจูุฑุฏุ ุงูุฒูููุ ุงูุณุญุจ)
```

## ๐ง ุงูููููุงุช ุงููุณุงุนุฏุฉ

### **ุดุฑูุท ุงูุฃุฏูุงุช**
```
src/components/Whiteboard/WhiteboardTopbar.tsx
โโโ ุฃุฏูุงุช ุงูุชุญุฏูุฏ: MousePointer2, Hand
โโโ ุฃุฏูุงุช ุงูุฑุณู: Square, Circle, Minus, ArrowRight, Type, StickyNote
โโโ ุฃุฏูุงุช ูุชูุฏูุฉ: Brain (ุงูุนูุงุตุฑ ุงูุฐููุฉ), Link (ุงูููุตู), Workflow (WF-01)
โโโ ุฃุฏูุงุช ุงูุชุญูู: ZoomIn, ZoomOut, RotateCcw, Save
โโโ ุงุณุชูุฑุงุฏ: Button, Separator, Badge ูู ูุธุงู UI
```

### **ุดุฑูุท ุงูุญุงูุฉ**
```
src/components/Whiteboard/StatusBar.tsx
โโโ ูุนูููุงุช ุงูุฃุฏุงุก: FPS, Zoom
โโโ ุฅุญุตุงุฆูุงุช ุงูุนูุงุตุฑ: elementsCount, selectedCount
โโโ ุญุงูุฉ ุงูุงุชุตุงู: connected, isLocalMode
โโโ ูุนุฑู ุงูููุญุฉ: boardId
```

## ๐ฏ ุงูุฎุทุงูุงุช ุงููุฎุตุตุฉ (Custom Hooks)

### **ุฎุทุงู ุชุญุณูู ุงูุฃุฏุงุก**
```
src/hooks/performance/useDebouncedCallback.ts
โโโ ูุธููุฉ: ุชุฃุฎูุฑ ุชูููุฐ ุงููุธุงุฆู ูุชุญุณูู ุงูุฃุฏุงุก
โโโ ุงุณุชุฎุฏุงู: viewport calculations, resizing
โโโ ุฅุนุฏุงุฏ: 16ms delay (~60fps)
```

### **ุฎุทุงูุงุช ุฃุฎุฑู ูุฑุฌุนุฉ**
- `useRootConnector` - ุฅุฏุงุฑุฉ ููุตู ุงูุฌุฐุฑ
- `useWF01Generator` - ูููุฏ ูุดุงุฑูุน WF-01
- `useTelemetry` - ุฌูุน ุจูุงูุงุช ุงูููุงุณุงุช

## ๐ ูุธู ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช

### **ุฅุฏุงุฑุฉ ุงููุดูุฏ**
```
SceneGraph (ูู lib/canvas/utils/scene-graph)
โโโ ูุธุงุฆู: addNode, removeNode, updateNode, getAllNodes, count
โโโ ุงุณุชุฎุฏุงู: ุฅุฏุงุฑุฉ ุฌููุน ุนูุงุตุฑ ุงููุงููุงุณ
โโโ ุฏูุฌ: ูุน Y.js ููุชุนุงูู ุงููุจุงุดุฑ
```

### **ุฅุฏุงุฑุฉ ุงูุฑูุงุจุท**
```
ConnectionManager (ูู lib/canvas/controllers/connection-manager)
โโโ ูุธุงุฆู: ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุฑูุงุจุท ุจูู ุงูุนูุฏ
โโโ ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ: addEventListener, removeEventListener
โโโ ุฅุฏุงุฑุฉ ุงูููุงุท: getAllAnchorPoints, updateAnchorsForSelection
```

### **ุงูุชุนุงูู ุงููุจุงุดุฑ**
```
YSupabaseProvider (ูู lib/yjs/y-supabase-provider)
โโโ ุชูููุฉ: Y.js + Supabase Realtime
โโโ ูุธุงุฆู: connect, disconnect, createSnapshot
โโโ ุชุนุงูู ูุน ุงูุฃุฎุทุงุก: timeout handling, fallback to local mode
```

## ๐จ ูุธุงู ุงูุนูุงุตุฑ ุงูุฐููุฉ

### **ุณุฌู ุงูุนูุงุตุฑ ุงูุฐููุฉ**
```
smartElementsRegistry (ูู lib/smart-elements/smart-elements-registry)
โโโ ูุธููุฉ: createSmartElementNode
โโโ ุฃููุงุน: sticky, shapes, text elements
โโโ ุชูุงูู: ูุน Smart Elements Panel
```

### **ููุญุฉ ุงูุนูุงุตุฑ ุงูุฐููุฉ**
```
SmartElementsPanel (ูู components/smart-elements/smart-elements-panel)
โโโ ุนุฑุถ: modal overlay (z-30)
โโโ ุญุฌู: 600x500px
โโโ ูุธุงุฆู: ุงุฎุชูุงุฑ ูุฅุฏุฑุงุฌ ุงูุนูุงุตุฑ ุงูุฐููุฉ
โโโ ุชูุงุนู: keyboard shortcut 'S'
```

## ๐ ูุธุงู ุงููุตุงุฏูุฉ ูุงูุฃูุงู

### **ูุฒูุฏ ุงููุตุงุฏูุฉ**
```
AuthProvider (ูู lib/auth/auth-provider)
โโโ ุชูุงูู: ูุน Supabase Auth
โโโ ุฅุฏุงุฑุฉ: user session, authentication state
โโโ fallback: Local Mode ุนูุฏ ูุดู ุงููุตุงุฏูุฉ
```

## ๐ ูุธุงู ุงูููุงุณุงุช

### **ุงูููุงุณุงุช ูุงูุชุญููู**
```
useTelemetry
โโโ ุชุณุฌูู: canvas operations, custom events
โโโ ุจูุงูุงุช: user interactions, performance metrics
โโโ ุชูุงูู: ูุน ูุธุงู analytics
```

## ๐ฎ ุงูุชูุงุนู ูุงูุชุญูู

### **ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ูู CollaborativeCanvas**
- `handleToolChange` - ุชุบููุฑ ุงูุฃุฏุงุฉ ุงููุดุทุฉ
- `insertSmartElement` - ุฅุฏุฑุงุฌ ุนูุตุฑ ุฐูู
- `handleSmartElementCreate` - ุฅูุดุงุก ุนูุตุฑ ุฐูู ุฌุฏูุฏ
- `handleWF01Generate` - ุชุญููู ุฅูู ูุดุฑูุน WF-01
- `handleSaveSnapshot` - ุญูุธ ููุทุฉ ูู ุงูุญุงูุฉ ุงูุญุงููุฉ
- `handleZoomIn/Out/Reset` - ุงูุชุญูู ูู ุงูุชูุจูุฑ
- `handleCanvasMove/Zoom` - ุงูุชุญูู ูู ููุถุน ูุชูุจูุฑ ุงููุงููุงุณ

### **ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ูู WhiteboardRoot**
- `handleMouseDown/Move/Up` - ุชูุงุนู ุงููุงูุณ
- `handleWheel` - ุงูุชูุจูุฑ ุจุงูุนุฌูุฉ
- `handleKeyDown` - ุงุฎุชุตุงุฑุงุช ุงูููุจูุฑุฏ (Delete, Escape)

## โก ุชุญุณููุงุช ุงูุฃุฏุงุก

### **ุชุญุณููุงุช ูุทุจูุฉ**
- โ `useDebouncedCallback` ููู viewport updates
- โ `ResizeObserver` ูุชุชุจุน ุญุฌู ุงูุญุงููุฉ
- โ Event-driven updates ููุนูุฏ
- โ Timeout handling ููุงุชุตุงูุงุช
- โ Fallback ุฅูู ุงููุถุน ุงููุญูู

### **ูุธุงู ุงูุทุจูุงุช (Z-Index) ุงููุญุฏุซ**
```
PlanningWorkspace: z-0     (ุงููุงุนุฏุฉ)
Canvas: z-1                (ุงููุงููุงุณ ุงูุฃุณุงุณู)
StatusBar: z-15           (ุดุฑูุท ุงูุญุงูุฉ)
Topbar: z-20             (ุดุฑูุท ุงูุฃุฏูุงุช)
Loading: z-25            (ุดุงุดุฉ ุงูุชุญููู)
SmartPanel: z-30         (ููุญุฉ ุงูุนูุงุตุฑ ุงูุฐููุฉ)
PropertiesPanel: z-25    (ููุญุฉ ุงูุฎุตุงุฆุต)
```

## ๐๏ธ ุงููููุงุช ุงูููุดุฃุฉ ูุงูููููุฏุฉ

### **ูููุงุช ุชู ุฅูุดุงุคูุง ูุคุฎุฑุงู**
1. โ `src/hooks/performance/useDebouncedCallback.ts` - ุชุญุณูู ุงูุฃุฏุงุก
2. โ ุชุญุฏูุซุงุช ุนูู `CollaborativeCanvas.tsx` - ุฅุตูุงุญ ุงูุชูุงุนู
3. โ ุชุญุฏูุซุงุช ุนูู `WhiteboardRoot.tsx` - ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ
4. โ ุชุญุฏูุซุงุช ุนูู `PlanningWorkspace.tsx` - ุชูุธูู ุงูุทุจูุงุช

### **ููููุงุช ูุฑุฌุนุฉ ูููู ูุฏ ุชุญุชุงุฌ ูุญุต**
1. `PropertiesPanel` - ููุฌูุฏ ูููู ูุฏ ูุญุชุงุฌ ุชุญุณูู
2. `FallbackCanvas` - ููุฌูุฏ ููุนุงู
3. `SmartElementsPanel` - ููุฌูุฏ ููุชูุงูู
4. `RootConnector` - ููุณุชุฎุฏู ูู WhiteboardRoot
5. `EnhancedSmartElementRenderer` - ููุณุชุฎุฏู ูุนุฑุถ ุงูุนูุงุตุฑ ุงูุฐููุฉ

### **ุชุจุนูุงุช ุฎุงุฑุฌูุฉ ูููุฉ**
- Y.js - ููุชุนุงูู ุงููุจุงุดุฑ
- Supabase - ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุตุงุฏูุฉ
- Framer Motion - ุงูุญุฑูุงุช ูุงูุงููููุดู (ูุญุชูู)
- Lucide React - ุงูุฃููููุงุช

## ๐ง ุงูุชูุงููุงุช ุงูุฎุงุฑุฌูุฉ

### **Supabase**
```javascript
// ุชูุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
supabase.from('boards').select('*')
supabase.from('boards').insert({...})

// ูุธุงู ุงููุตุงุฏูุฉ
useAuth() -> user.id, user.email

// ุงูุชุฎุฒูู ุงููุจุงุดุฑ
YSupabaseProvider -> realtime collaboration
```

### **ูุธุงู ุงูุชูุฌู (RTL)**
```javascript
DirectionProvider -> RTL support for Arabic
useDirection() -> direction context
```

## ๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ูุงูุชูุตูุงุช

### **โ ูุง ูุนูู ุจุดูู ุตุญูุญ**
- ูููู ุงูููููุงุช ููุธู ูููุทูู
- ูุธุงู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ูุชูุงูู
- ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ูุงูุงูุชูุงู ูููุถุน ุงููุญูู
- ูุธุงู ุงูุทุจูุงุช ูุญุณู
- ุชุญุณููุงุช ุงูุฃุฏุงุก ูุทุจูุฉ

### **โ๏ธ ููุงุทู ุชุญุชุงุฌ ูุฑุงูุจุฉ**
- ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฎุทุงูุงุช ุงููุฎุตุตุฉ ุชุนูู ุจุดูู ุตุญูุญ
- ูุฑุงูุจุฉ ุฃุฏุงุก ุงูุชุนุงูู ุงููุจุงุดุฑ ูุน ุนุฏุฏ ูุจูุฑ ูู ุงููุณุชุฎุฏููู
- ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ุฃุฏูุงุช ุงูุฑุณู ูุงูุชุญุฏูุฏ

### **๐ฏ ุงูุชูุตูุงุช ููุชุทููุฑ ุงููุณุชูุจูู**
1. ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุฃุฏูุงุช ุงูุฑุณู ุงููุชูุฏูุฉ
2. ุชุญุณูู ูุธุงู ุงูุงุฎุชุตุงุฑุงุช
3. ุฅุถุงูุฉ ูุธุงู undo/redo ูุชูุฏู
4. ุชุญุณูู ุงุณุชุฌุงุจุฉ ุงูุชุทุจูู ููุดุงุดุงุช ุงูุตุบูุฑุฉ

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ูู:** `{timestamp}`
**ุญุงูุฉ ุงููุธุงู:** `ูุณุชูุฑ ููุนูู ุจููุงุกุฉ`
**ุงูุฅุตุฏุงุฑ:** `v1.0.0`